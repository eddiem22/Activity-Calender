var express = require('express');
var bodyParser = require('body-parser');
var app = express();

var mongo = require('mongodb');

var fs = require('fs');

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
var lists = ('./getLists');
var PeopleList = lists.getPeople();
var TransportationList= lists.getTransportation();
var ActivitiesList = lists.getActivities();
var all_images = lists.getAll();
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


app.use(bodyParser.urlencoded({ extended: true }));

app.set('port', (process.env.PORT || 5000));
app.use(express.static(__dirname + `\\public`));
app.set('views', __dirname + '\\public');
app.engine('html', require('ejs').renderFile);
app.set('view engine', 'html');

// default path for node app -> opens on index.html
app.get('*', function(req, res){
    res.render('index.html');
});

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
app.get('/people', function(req, res) {
    res.sendFile(PeopleList);
    
});

//(POST) https://<host-name>:9001/images/people/save -> saves people files to DB
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
app.get('/transport', function(req, res){
    res.sendFile(TransportationList)
});
//(POST) https://<host-name>:9001/images/transport/save -> saves transportation image files to DB
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
app.get('/activities', function(req, res) {
     res.sendFile(ActivitiesList);
});

// (POST) https://<host-name>:9001/images/activities/save -> saves people files to DB
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
 app.get('/people', function(req, res) {
     res.sendFile('https://ouractivitycalander:9001/images/popular/');
});

//(POST) https://<host-name>:<port-number>/images/popular/save -> saves people files to DB
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
app.get('/all', function(req, res) {
     res.sendFile(all_images);
});
/*
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
10. (POST) https://<host-name>:<port-number>/:<user-address>/this-week/save -> saves progress on thisWeek calendar for logged in user
11. (POST) https://<host-name>:<port-number>/:<user-address>/next-week/save -> saves progress on nextWeek calendar for logged in user
12. (POST) https://<host-name>:<port-number>/:<user-address>/settings/save -> saves settings (aka folder locations on local machine) for logged in user
*/
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// launch the app
app.listen(app.get('port'), function() {
    console.log(`Activity Calendar server listening on port ${app.get('port')}`);
});